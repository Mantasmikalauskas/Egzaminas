import React,{useState,useContext} from 'react'; import API from '../api'; import { AuthContext } from '../context/AuthContext'; import { useNavigate } from 'react-router-dom'; import Header from '../components/Header';
export default function Register(){ const [name,setName]=useState(''); const [email,setEmail]=useState(''); const [password,setPassword]=useState(''); const {login} = useContext(AuthContext); const nav = useNavigate();
  const submit = async e => { e.preventDefault(); try{ const res = await API.post('/auth/register',{name,email,password}); login(res.data.user,res.data.token); nav('/'); }catch(err){ alert(err.response?.data?.message||err.message); } };
  return (<div><Header /><div className='form-wrap'><form onSubmit={submit} className='form'><h2>REGISTRUOTIS</h2><label>Name<input value={name} onChange={e=>setName(e.target.value)} /></label><label>Email<input value={email} onChange={e=>setEmail(e.target.value)} /></label><label>Password<input type='password' value={password} onChange={e=>setPassword(e.target.value)} /></label><button>REGISTRUOTIS</button></form></div></div>); }