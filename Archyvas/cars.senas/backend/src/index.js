
import express from 'express'; import dotenv from 'dotenv'; import cors from 'cors'; import 'express-async-errors'; import connectDB from './config/db.js'; import authRoutes from './routes/authRoutes.js'; import carRoutes from './routes/carRoutes.js'; import reservationRoutes from './routes/reservationRoutes.js'; import paymentRoutes from './routes/paymentRoutes.js'; import errorHandler from './middleware/errorMiddleware.js'; dotenv.config(); const app = express(); app.use(cors({ origin: process.env.FRONTEND_URL || true })); app.use(express.json()); app.use('/api/auth', authRoutes); app.use('/api/cars', carRoutes); app.use('/api/reservations', reservationRoutes); app.use('/api/payments', paymentRoutes); app.get('/api/ping',(req,res)=>res.json({ok:true})); app.use(errorHandler); const PORT = process.env.PORT || 5000; connectDB(process.env.MONGO_URI||'mongodb://127.0.0.1:27017/cars_demo').then(()=> app.listen(PORT, ()=> console.log('Server', PORT))).catch(err=>{console.error(err);process.exit(1)});
